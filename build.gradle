plugins {
    // github
    id "co.riiid.gradle" version "0.4.2"
    // bintray
    id "com.jfrog.bintray" version "1.6"
}

group = 'org.omegat.gradle'
version = currentVersion

apply plugin: 'groovy'
apply plugin: 'idea'
apply plugin: 'co.riiid.gradle'
apply plugin: 'com.jfrog.bintray'

repositories {
    jcenter()
}

dependencies {
    compile gradleApi()
    compile localGroovy()
    compile fileTree(dir: "lib", include: "**/*.jar")
    compile 'org.languagetool:languagetool-core:3.3'
    compile ('org.languagetool:language-all:3.3') {
        // Temporary exclusion; see https://sourceforge.net/p/omegat/bugs/814/
        exclude module: 'lucene-gosen-ipadic'
    }
    compile  'org.languagetool:hunspell-native-libs:2.9'
    compile  'org.apache.lucene:lucene-analyzers-common:5.2.1'
    compile  'org.apache.lucene:lucene-analyzers-kuromoji:5.2.1'
    compile  'org.apache.lucene:lucene-analyzers-smartcn:5.2.1'
    compile  'org.apache.lucene:lucene-analyzers-stempel:5.2.1'
    compile  'org.eclipse.jgit:org.eclipse.jgit:4.2.0.201601211800-r'
    compile  'com.jcraft:jsch.agentproxy.jsch:0.0.9'
    // Specify the following two here just to make sure all jsch.agentproxy libs are the same version.
    compile  'com.jcraft:jsch.agentproxy.connector-factory:0.0.9'
    compile  'com.jcraft:jsch.agentproxy.svnkit-trilead-ssh2:0.0.9'
    compile  'org.tmatesoft.svnkit:svnkit:1.8.12'
    compile  'org.apache.pdfbox:pdfbox:2.0.0'
    compile  'net.loomchild:maligna:3.0.0'
    compile  'commons-io:commons-io:2.4'
    compile  'commons-lang:commons-lang:2.6'
    compile 'org.slf4j:slf4j-jdk14:1.7.21'
    compile 'org.dict.zip:dictzip-lib:0.8.1'
    compile 'com.github.takawitter:trie4j:0.9.2'
    compile 'org.madlonkay.supertmxmerge:supertmxmerge:2.0.1'
    compile 'org.omegat:vldocking:3.0.5'
    compile 'org.omegat:juniversalchardet:1.0.4'
    // Groovy used for scripts only
    compile 'org.codehaus.groovy:groovy-all:2.4.6'

    //RSyntaxUI and additional modules
    compile 'com.fifesoft:rsyntaxtextarea:2.5.8'
    compile 'com.fifesoft:rstaui:2.5.7'
    compile('com.fifesoft:languagesupport:2.5.8') {
        exclude module: 'rhino'
    }
    compile 'com.fifesoft:autocomplete:2.5.8'
}

compileGroovy {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from 'build/docs/javadoc'
}

task sourcesJar(type: Jar) {
    from sourceSets.main.allSource
    classifier = 'sources'
}

task createReleasePropertiesFile(type:Exec) {
    String fileName = 'omegat.plugin.release.properties'
    println 'Creating $fileName'
    String fileContent = "version=$currentVersion"
    (new File("$rootDir/src/main/resources/$fileName")).write(fileContent)
}

task wrapper(type: Wrapper, description: 'Gradle Wrapper task') {
    gradleVersion = '2.14.1'
}